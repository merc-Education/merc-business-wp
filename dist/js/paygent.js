const CREDIT_CARD_PAYMENT="クレジットカード（一括払い/分割払い）",hashKey="HOCSNed4Xog2Z",inputListWithOtherOption=[{class:"check-experience",name:"マーケティング実務経験"},{class:"check-occupation",name:"職業"},{class:"check-purpose",name:"受講目的"},{class:"check-trigger",name:"MERCを知ったきっかけ"}];let paymentMethod=CREDIT_CARD_PAYMENT;const isValidCheckboxSelection=(e,t)=>{const n=document.querySelectorAll(`.${e}`),o=document.getElementById(`${e}-other`),a=document.getElementById(`${e}-other-text`);return Array.from(n).some((e=>e.checked))?!o||!o.checked||a&&""!==a.value?"":`・${t}（「その他」を選択した場合はテキスト入力必須）`:`・${t}`},getSelectboxValue=e=>{const t=e.selectedIndex;return e.options[t].text},handleSubmit=()=>{const e=document.querySelectorAll("[data-required]"),t=[Array.from(e).filter((e=>""===e.value)).map((e=>`・${e.dataset.name}`)).join("\n"),inputListWithOtherOption.map((e=>isValidCheckboxSelection(e.class,e.name))).filter(Boolean).join("\n"),document.getElementById("terms").checked?"":"・利用規約への同意"].filter(Boolean).join("\n");if(t)return void alert(`必須項目を入力してください\n${t}`);const n=`${getSelectboxValue(document.getElementById("birthYear"))}/${getSelectboxValue(document.getElementById("birthMonth"))}/${getSelectboxValue(document.getElementById("birthDay"))}`;if(document.getElementById("birth").value=n,paymentMethod=(()=>{const e=document.querySelector("[data-payment-method]:checked");return e?e.value:""})(),paymentMethod===CREDIT_CARD_PAYMENT){const e=document.getElementById("tel").value+Date.now();document.getElementById("trading_id").value=e;const t=(()=>{const e=document.querySelector("[data-price]:checked");return e?e.value.replace(/,|円/g,""):""})(),n=document.getElementById("merchant_id").value;document.getElementById("id").value=t;const o={tradingId:e,id:t,merchantId:n,hashKey:hashKey};fetch("/wp-json/custom/v1/generate-hash/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((e=>e.json())).then((e=>{document.getElementById("hc").value=e.hash,$("#googleForm").submit()}))}else $("#googleForm").submit()},button=document.getElementById("submitButton");button.addEventListener("click",handleSubmit),$("#googleForm").submit((function(e){e.preventDefault(),$.ajax({url:FORM_URL,data:$("#googleForm").serialize(),type:"POST",dataType:"xml"}).always((function(e,t){200===e.status?window.location.href=ERROR_URL:paymentMethod===CREDIT_CARD_PAYMENT?$("#paygentForm").submit():window.location.href=THANKS_URL}))}));